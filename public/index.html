<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <title>Uranus Tag Counter</title>
</head>
<body>
<h1>Uranus Tag Counter</h1>

<div id="dashboard"></div>

<script src="/socket.io/socket.io.js"></script>
<script>
    const socket = io();

    const counters = {};

    socket.on('initialData', (data) => {
        Object.assign(counters, data);
        renderDashboard();
    });

    socket.on('update', (data) => {
        const { key, count } = data;
        if (counters.hasOwnProperty(key)) {
            counters[key] = count;
            renderDashboard();
        }
    });

    function renderDashboard() {
        let html = '<table border="1" cellpadding="8" style="border-collapse: collapse;">';
        html += '<tr><th>Key</th><th>Count</th></tr>';

        for (const key in counters) {
            html += `<tr><td>${key}</td><td>${counters[key]}</td></tr>`;
        }
        html += '</table>';

        document.getElementById('dashboard').innerHTML = html;
    }
</script>
</body>
</html>
